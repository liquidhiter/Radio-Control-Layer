<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radio Control Layer (RCL): NESB Command Handlers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radio Control Layer (RCL)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nesb_command_handlers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NESB Command Handlers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Introduction</h1>
<p><a href="https://infocenter.nordicsemi.com/topic/com.nordic.infocenter.sdk5.v12.0.0/esb_users_guide.html">Nordic Enhanced ShockBurst (NESB)</a> is a basic protocol which supports two-way data packet communication with the following features:</p>
<ul>
<li>Packet acknowledgement</li>
<li>Automatic retransmission of lost packets</li>
<li>Variable packet length</li>
</ul>
<p>It provides a simple bidirectional data link in which a device can act as either primary transmitter (PTX) or as primary receiver (PRX).</p>
<ul>
<li><a class="el" href="nesb_ptx_handler.html">NESB PTX Command Handler</a></li>
<li><a class="el" href="nesb_prx_handler.html">NESB PRX Command Handler</a></li>
</ul>
<h1>Packet transaction</h1>
<p>A simple packet transaction involves the PTX device sending a packet which is received and acknowledged by the PRX device. Once the PTX device receives the acknowledge, a new packet can be sent or both devices return to an "Idle" state.</p>
<div align="center">
<img src="inline_umlgraph_9.png" />
</div>
<p>If an ACK sent by the PRX device does not reach the PTX device, the PTX will assume that the packet was lost and will retransmit the packet considering a retransmission delay set by the user. This will continue to happen until an ACK is received or until the maximum number of retransmission attempts is reached.</p>
<div align="center">
<img src="inline_umlgraph_10.png" />
</div>
<p>In simple terms, the NESB command handlers can be described as extensions of the generic command handlers in which the LRF can automatically switch between Tx and Rx, or vice versa. The time that it takes to switch between these to states is called the turnaround time.</p>
<h1>Packet format</h1>
<p>The NESB protocol has a specific over-the-air packet format in which all data is assumed to be transmitted and received most-significant-bit first.</p>
<div class="image">
<img src="ota_packet_format_nesb.png" alt="ota_packet_format_nesb.png"/>
<div class="caption">
NESB packet format (over-the-air)</div></div>
<p> Additionally, the NESB header is divided into three fields.</p>
<div class="image">
<img src="header_format_nesb.png" alt="header_format_nesb.png"/>
<div class="caption">
NESB header format</div></div>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="rcl_architecture.html">RCL Architecture</a></li><li class="navelem"><a class="el" href="rcl_command_handlers.html">Command Handlers</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
